<!doctype html>
<html lang="en">

<head>
<link rel="icon" type="image/png" href="static/images/logo2.png">
<!--link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%22256%22 height=%22256%22 viewBox=%220 0 100 100%22><rect width=%22100%22 height=%22100%22 rx=%2250%22 fill=%22%230058ff%22></rect><path fill=%22%23fff%22 d=%22M72.15 21.33L72.15 21.33Q74.49 22.50 74.90 25.02Q75.30 27.54 73.59 29.61L73.59 29.61Q72.42 31.23 70.58 31.41Q68.73 31.59 66.84 30.69L66.84 30.69Q64.68 29.70 62.30 29.16Q59.91 28.62 57.30 28.62L57.30 28.62Q52.44 28.62 48.62 30.15Q44.79 31.68 42.09 34.52Q39.39 37.35 38.00 41.22Q36.60 45.09 36.60 49.77L36.60 49.77Q36.60 55.26 38.18 59.31Q39.75 63.36 42.54 66.06Q45.33 68.76 49.11 70.07Q52.89 71.37 57.30 71.37L57.30 71.37Q59.73 71.37 62.16 70.92Q64.59 70.47 66.84 69.30L66.84 69.30Q68.73 68.40 70.58 68.67Q72.42 68.94 73.68 70.56L73.68 70.56Q75.48 72.81 74.99 75.20Q74.49 77.58 72.24 78.66L72.24 78.66Q69.90 79.83 67.43 80.60Q64.95 81.36 62.43 81.77Q59.91 82.17 57.30 82.17L57.30 82.17Q50.82 82.17 45.02 80.10Q39.21 78.03 34.67 73.98Q30.12 69.93 27.51 63.86Q24.90 57.78 24.90 49.77L24.90 49.77Q24.90 42.84 27.29 36.99Q29.67 31.14 34.04 26.87Q38.40 22.59 44.34 20.21Q50.28 17.82 57.30 17.82L57.30 17.82Q61.26 17.82 65.04 18.72Q68.82 19.62 72.15 21.33Z%22></path></svg>" /-->
<meta charset="UTF-8">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="-1">
<meta http-equiv="CACHE-CONTROL" content="NO-CACHE">

<script>
    if (localStorage.getItem('theme') === 'dark') {
        document.documentElement.classList.add('dark-mode');
    }
</script>


<!-- CSS Stylesheets -->
<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">

<title>RDF Graph</title>

</head>

<body>
    <div class="topnav">
        <a href="/AGAS" class="logo-link">
            <img src="{{ url_for('static', filename='images/logo2.png') }}" alt="Logo" class="logo-btn">
        </a>
        <a href="/">Home</a>
        <a href="/home">Extra</a>
        <a href="/resultsBQ">Results</a>
        <a href="/versions">Versions</a>
        <a href="/about">About</a>
        <a href="/contacts">Contact</a>
        <a id="theme-toggle">üåô</a>
        {% if session.logged_in %}
            <a href="/logout">Logout</a>
        {% else %}
            <a href="/login">Login</a>
        {% endif %}
        <div class="search-container">
            <form action="{{ url_for('search') }}" method="get" autocomplete="off">
                <input id="search-input" type="text" placeholder="Search.." name="query" oninput="autocompleteSearch(this.value)">
                <div id="autocomplete-box" class="autocomplete-items"></div>
                <button type="submit"> üîç </button>
            </form>
            <script>
                function autocompleteSearch(val) {
                  const box = document.getElementById("autocomplete-box");
                  box.innerHTML = "";
                
                  if (val.length < 2) return; // wait until at least 2 chars
                
                  fetch(`/autocomplete?q=${val}`)
                    .then(res => res.json())
                    .then(data => {
                      data.forEach(item => {
                        const div = document.createElement("div");
                        div.textContent = item;
                        div.onclick = function () {
                          document.getElementById("search-input").value = item;
                          box.innerHTML = "";
                        };
                        box.appendChild(div);
                      });
                    });
                }
                </script>                
        </div>
    </div>

    <section class="ontologyView">
        <!--textarea id="rdf" name="rdf" rows="40" cols="85" required>{{ generated_rdf or '' }}</textarea>

        {% if graph_path %}
            <h3>Generated Ontology Graph:</h3>
            <div style="text-align:left; margin-left:50px">
                <img src="{{ graph_path }}" alt="RDF Graph Visualization" style="width: auto; height: auto; max-height: 90vh; border: 1px solid #ccc; box-shadow: 0 0 8px rgba(0,0,0,0.2); border-radius: 8px;">
            </div>
        {% endif %}

        {% if graph_path %}
            <div style="text-align:left; margin-top: 10px; margin-left: 50px">
                <a href="{{ graph_path }}" download>
                    <button class="btn">Download PNG</button>
                </a>

                {% set pdf_path = graph_path.replace('.png', '.pdf') %}
                <a href="{{ pdf_path }}" download>
                    <button class="btn">Download PDF</button>
                </a>
            </div>
        {% endif %} -->

        {% if full_graph_path %}
            {% if language == 'EN' %}
                <h3 style="margin-left: 40px;">Ontology Graph Visualizations</h3>
            {% elif language == 'PT' %}
                <h3 style="margin-left: 40px;">Gr√°fico(s) da Ontologia</h3>
            {% endif %}
            
            <div class="text-cards" style="padding: 0 40px;">
                <div class="card">
                    {% if language == 'EN' %}
                        <h4>Full RDF Graph</h4>
                    {% elif language == 'PT' %}
                        <h4>Gr√°fico Completo</h4>
                    {% endif %}
                    <div class="image-container">
                        <img src="{{ full_graph_path }}" alt="Full Ontology Graph">
                    </div>
                    <a href="{{ full_graph_path }}" download>
                        <button class="btn" style="margin-top: 10px;">Download PNG</button>
                    </a>
                    {% set full_pdf_path = full_graph_path.replace('.png', '.pdf') %}
                    <a href="{{ full_pdf_path }}" download>
                        <button class="btn">Download PDF</button>
                    </a>
                </div>

                {% if filtered_graph_path %}
                <div class="card">
                    {% if language == 'EN' %}
                        <h4>Filtered RDF Graph ({{ filter|join(', ') }})</h4>
                    {% elif language == 'PT' %}
                        <h4>Gr√°fico Restrito ({{ filter|join(', ') }})</h4>
                    {% endif %}
                    <div class="image-container">
                        <img src="{{ filtered_graph_path }}" alt="Filtered Ontology Graph">
                    </div>
                    <a href="{{ filtered_graph_path }}" download>
                        <button class="btn" style="margin-top: 10px;">Download PNG</button>
                    </a>
                    {% set filtered_pdf_path = filtered_graph_path.replace('.png', '.pdf') %}
                    <a href="{{ filtered_pdf_path }}" download>
                        <button class="btn">Download PDF</button>
                    </a>
                </div>
                {% endif %}
            </div>
        {% endif %}

    </section>

    <a href="/home">Back</a>

<script>
document.addEventListener('DOMContentLoaded', function () {
    const toggleButton = document.getElementById('theme-toggle');
    const body = document.body;

    // Load saved theme
    if (localStorage.getItem('theme') === 'dark') {
        body.classList.add('dark-mode');
        toggleButton.textContent = "‚òÄÔ∏è";
    }

    toggleButton.addEventListener('click', function () {
        body.classList.toggle('dark-mode');

        if (body.classList.contains('dark-mode')) {
            localStorage.setItem('theme', 'dark');
            toggleButton.textContent = "‚òÄÔ∏è";
        } else {
            localStorage.setItem('theme', 'light');
            toggleButton.textContent = "üåô";
        }
    });
});
</script>

</body>


<!-- Our codes -->
<script src="{{ url_for('static', filename='js/main.js') }}"></script>
